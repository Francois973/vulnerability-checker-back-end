class ParserErlangService
  def initialize(file_content)
    @file_content = file_content
  end

  def call
    arr_specs = []
    @file_content.split(":hex,").each do |spec|
      next if spec.include?("%{")

      arr_specs << {
        name:    name_spec(spec),
        version: Gem::Version.new(version_spec(spec))
      }
    end
    arr_specs
  end

  private

  def name_spec(spec)
    spec.split(" ")[0].gsub(":", "").gsub(",", "")
  end

  def version_spec(spec)
    spec.split(" ")[1].gsub(",", "").gsub("\"", "")
  end
end
