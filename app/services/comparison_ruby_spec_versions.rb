class ComparisonRubySpecVersions
  def initialize; end

  def call(arr_specs)
    # specs_with_vulns_detected = []
    arr_specs.each do |spec|
      vulnerability = Vulnerability.find_by(stack: spec[:name], ecosystem: "RUBYGEMS")
      # varaible signe comparaison
      Gem::Version.new(spec[:version]).public_send("<=",
                                                   vulnerability.version)
    end
    ap arr_specs
    # ap specs_with_vulns_detected
    # show_vulnerabilities(specs_with_vulns_detected)
  end

  # def show_vulnerabilities(specs_with_vulns_detected)
  #   @vulnerabilities = Vulnerability.all
  #   @project = Project.last

  #   specs_with_vulns_detected.each do |spec|
  #     @vulnerability = @vulnerabilities.find_by(stack: spec[:name])
  #   end
  #   ap List.create!(project: @project, vulnerability: @vulnerability)
  # end
end
