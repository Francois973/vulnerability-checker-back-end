class ComparisonRubySpecVersions
  def initialize; end

  def call(arr_specs)
    specs_with_vulns_detected = []
    @vulnerabilities = Vulnerability.all
    arr_specs.each do |spec|
      @vulnerabilities.each do |vuln|
        sign_and_version = vuln.version.split(" ")
        spec[:version].public_send(sign_and_version[0], sign_and_version[1])
        vulnerability = Vulnerability.find_by(stack: spec[:name], ecosystem: "RUBYGEMS")
        specs_with_vulns_detected << vulnerability
      end
    end
    # ap arr_specs
    ap specs_with_vulns_detected
    # show_vulnerabilities(specs_with_vulns_detected)
  end

  # def show_vulnerabilities(specs_with_vulns_detected)
  #   @vulnerabilities = Vulnerability.all
  #   @project = Project.last

  #   specs_with_vulns_detected.each do |spec|
  #     @vulnerability = @vulnerabilities.find_by(stack: spec[:name])
  #   end
  #   ap List.create!(project: @project, vulnerability: @vulnerability)
  # end
end
