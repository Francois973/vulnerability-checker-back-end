require 'test_helper'

class RepositoriesSerializerTest < ActionDispatch::IntegrationTest
  setup do
    @repositories = {
      owner: "Francois973",
      repositories: [{
        name: "Airbnplane",
        url: "https://github.com/Francois973/Airbnplane",
        languages: {
             "Ruby" => 79202,
             "HTML" => 30530,
             "SCSS" => 11755,
       "JavaScript" => 1733,
            "Shell" => 230
        }
      }]
    }
  end

  test "should serialize repositories" do
    expected_format_send = @repositories.as_json

    options = {serializer: RepositoriesSerializer}

    repositories_serialize_json = ActiveModelSerializers::SerializableResource.new(@repositories, options).as_json

    assert_equal expected_format_send, repositories_serialize_json
  end
end
