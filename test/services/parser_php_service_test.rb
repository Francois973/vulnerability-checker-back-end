require 'test_helper'

class ParserPhpServiceTest < ActiveSupport::TestCase
  test "should return parse composer lock" do
    response_body = file_fixture("composer_valid.lock").read

    ap result = ParserPhpService.new(response_body).call

    assert_equal "composer/package-versions-deprecated", result[0][:name]
    assert_equal Gem::Version.new("1.11.99.4"), result[0][:version]
  end
end
