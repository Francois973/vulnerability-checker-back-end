require 'test_helper'

class ParserPhpServiceTest < ActiveSupport::TestCase
  test "should return parse composer lock" do
    response_body = file_fixture("composer_valid.lock").read

    result = ParserPhpService.new(response_body).call

    assert_equal "composer/package-versions-deprecated", result[0][:name]
    assert_equal Gem::Version.new("1.11.99.4"), result[0][:version]
  end

  # test "should return parse package-lock" do
  #   response_body = file_fixture("package-lock_valid.json").read

  #   result = ParserYarnLockService.new(response_body).call

  #   assert_equal "@hotwired/stimulus", result[0][:name]
  #   assert_equal Gem::Version.new("3.1.0"), result[0][:version]
  # end
end
