require "test_helper"

class ParserRustServiceTest < ActiveSupport::TestCase
  test "should return parse yarn lock" do
    response_body = file_fixture("Cargo_valid.lock").read

    result = ParserRustService.new(response_body).call

    assert_equal "addr2line", result[0][:name]
    assert_equal Gem::Version.new("0.17.0"), result[0][:version]

    assert_equal "adler", result[1][:name]
    assert_equal Gem::Version.new("1.0.2"), result[1][:version]
  end
end
