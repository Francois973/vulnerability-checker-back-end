# Vulnerabilities checker

[![forthebadge](https://forthebadge.com/images/badges/made-with-ruby.svg)](https://forthebadge.com)

This backend was built in Ruby on Rails as an API. It allows to inform a user of potential vulnerabilities that are present in his web project. The frontend part of this project can be found here: [Front-side-react](https://github.com/Francois973/vulnerability-checker-front-end) and was built with the Javascript framework: React.

----> GO : [SecureVNL](https://secure-vnl.onrender.com/)

## Technical information

- Languages: Ruby --version 3.1.2   <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/ruby/ruby-original.svg" alt="ruby" width="30" height="30"/>
- Framework: Ruby on Rails --version 7.0.4   <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/rails/rails-original-wordmark.svg" alt="rails" width="30" height="30" alt="rails"/> 
- Database: Postgresql --version 1.4.4   <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/postgresql/postgresql-original-wordmark.svg" alt="postgresql" width="30" height="30" alt="postgresql"/>
- Redis-cli --version 7.0.5 <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTqGOnMaH06Z_CLSISYeL-aM-13TOzJnbIoSvLkToNZH0J4nUbrcRWIcqb3cJf3YXpFdl8&usqp=CAU"  width="50" height="40" alt="redis-client" />
- Sidekiq --version 7.0.1 <img src="https://sidekiq.org/assets/sidekiq.png" width="30" height="30" alt="sidekiq"/>

## Installation

Add Redis and Sidekiq in order to manage jobs in background. Redis store Jobs in external database and Sidekiq store and depile Jobs from Active Job.

The aim is to ensure a minimum wait for the user to submit a request to the API.

```sh
gem 'sidekiq'
gem 'redis', '~> 4.0'
```

### Action Cable which use Websocket 

```sh
class ProjectChannel < ApplicationCable::Channel
  def subscribed
    project = Project.find_by(uuid: params[:uuid])
    stream_for project
  end

  def unsubscribed
    # Any cleanup needed when channel is unsubscribed
  end
end
```

## Operation

#### POST request
The post request consists in sending a project using its Github repository url so that the API can scan it and determine if it contains vulnerabilities
```sh
http://localhost:3000/api/v1/projects
```
#### GET request

```sh
http://localhost:3000/api/v1/projects/:id
```

#### Response JSON

```sh
{
  "name": null,
  "uuid": "e6d8498f-37bd-4fb6-b58d-f1f73305c3a0",
  "status": "New",
  "url": "https://github.com/Francois973/rails-mediless",
  "ecosystems": {
    "RUBYGEMS": "pending",
    "ERLANG": "pending"
  },
  "vulnerabilities": []
}

```

Exemple of vulnerability with RUBYGEMS

```sh
{stack: 'actionpack', summary: 'Cross-site Scripting in actionpack', details: 'actionpack from the Ruby on Rails project is vulne…). There are no known workarounds for this issue.', ecosystem: 'RUBYGEMS', id: 3, …}
```
